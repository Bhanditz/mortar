#!/usr/bin/env ruby
# frozen_string_literal: true

# add lib to libpath (only needed when running from the sources)
require 'pathname'
lib_path = File.expand_path('../../lib', Pathname.new(__FILE__).realpath)
$LOAD_PATH.unshift lib_path unless $LOAD_PATH.include?(lib_path)

if ARGV.first == 'install-completions'
  require 'mortar/bash_completion_installer'
  exit
end

require 'mortar'
$0 = 'mortar'
$stdout.sync = true

Mortar::RootCommand.run
